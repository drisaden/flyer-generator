<!DOCTYPE html>
<html lang="en">
<head id="head-section">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <title>Dynamic Usrah Flyer Generator</title>
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
        integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/fontawesome.min.css"
        integrity="sha512-xX2rYBFJSj86W54Fyv1de80DWBq7zYLn2z0I9bIhQG+rxIF6XVJUpdGnsNHWRa6AvP89vtFupEPDP8eZAtu9qA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://cdn.jsdelivr.net/npm/hijri-date@1.0.1/dist/hijri-date.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>


<link rel="stylesheet" href="https://adenaikeidris.com.ng/assets/css/style.css">
 <link rel="icon" type="image/png" href="./mssn-logo.png">

</head>
<style>
@font-face {
    font-family: 'Trap';
    src: url('fonts/Trap-Regular.woff2') format('woff2'),
         url('fonts/Trap-Regular.woff') format('woff');
    font-weight: 400; 
    font-style: normal;
}

@font-face {
    font-family: 'Trap';
    src: url('fonts/Trap-SemiBold.woff2') format('woff2'),
         url('fonts/Trap-SemiBold.woff') format('woff');
    font-weight: 600; 
    font-style: normal;
}

@font-face {
    font-family: 'Trap';
    src: url('fonts/Trap-Bold.woff2') format('woff2'),
         url('fonts/Trap-Bold.woff') format('woff');
    font-weight: 700; 
    font-style: normal;
}

@font-face {
    font-family: 'Trap';
    src: url('fonts/Trap-Black.woff2') format('woff2'),
         url('fonts/Trap-Black.woff') format('woff');
    font-weight: 900;
    font-style: normal;
}

@font-face {
    font-family: 'Trap';
    src: url('fonts/Trap-ExtraBold.woff2') format('woff2'),
         url('fonts/Trap-ExtraBold.woff') format('woff');
    font-weight: 800;
    font-style: normal;
}

@font-face {
    font-family: 'Trap';
    src: url('fonts/Trap-Light.woff2') format('woff2'),
         url('fonts/Trap-Light.woff') format('woff');
    font-weight: 300;
    font-style: normal;
}

@font-face {
    font-family: 'Trap';
    src: url('fonts/Trap-Medium.woff2') format('woff2'),
         url('fonts/Trap-Medium.woff') format('woff');
    font-weight: 500;
    font-style: normal;
}

:root {
    /* Font Family */
    --font-family-trap: 'Trap', sans-serif;

    /* Font Weights */
    --f-weight-regular: 400;
    --f-weight-medium: 500;
    --f-weight-semibold: 600;
    --f-weight-bold: 700;
    --f-weight-extrabold: 800;
    --f-weight-black: 900;
    --f-weight-light: 300;
}

/* body {
    font-family: var(--font-family-trap);
} */

.regular-text {
  font-family: var(--font-family-trap);
    font-weight: var(--f-weight-regular);
}

.medium-text {
  font-family: var(--font-family-trap);
    font-weight: var(--f-weight-medium);
}

.semibold-text {
  font-family: var(--font-family-trap);
    font-weight: var(--f-weight-semibold);
}

.bold-text {
  font-family: var(--font-family-trap);
    font-weight: var(--f-weight-bold);
}

.extrabold-text {
  font-family: var(--font-family-trap);
    font-weight: var(--f-weight-extrabold);
}

.black-text {
  font-family: var(--font-family-trap);
    font-weight: var(--f-weight-black);
}

.light-text {
    font-weight: var(--f-weight-light);
}



  .leading-0{
    line-height: 0.85;
  }
  .border-lime{
    border-color: #90FF27;
  }
  .text-lime{
    color: #90FF27;
  }
   .text-shadow{
    text-shadow: 5px .4px gray;
    color: #90FF27;
  }
  .z-9999{
    z-index: 9999;
  }
  .z-10{
    z-index: -10;
  }
</style>

<body>

      <main id="modal" class="fixed top-0 left-0 w-full h-full bg-gray-100  flex flex-col items-center justify-center z-9999">
  
    <div class="bg-white p-8 rounded shadow-md max-w-md w-11/12 mx-auto">
        
      <label for="topicInput" class="block text-sm font-medium text-gray-700 my-2">Topic:</label>
    <input type="text" id="topicInput" class="mt-1 p-2 outline-none border border-gray-300 rounded-lg w-full focus:outline-none focus:shadow" oninput="updateTemplate()">
     <label for="lecturerInput" class="block text-sm font-medium text-gray-700 my-2 mt-4">Lecturer Details:</label>
  
     <div class="w-full my-1">
                       <label for="lecturerInput" class="block text-sm font-medium text-gray-700 my-2">Title:</label>                 <select id="titleSelect" style="font-size: 1.125rem; font-family: 'Montserrat', sans-serif;
                                        font-weight: 500;"
                                            class="py-2 px-4 border border-gray-300 rounded-lg w-full focus:outline-none focus:shadow text-lg tx-lg font-semibold text-black tracking-wider bg-white" onchange="updateTemplate()">
                                            
                             <option value="Mr." class="pl-2"><span class="mx-3 block"></span>Mr.</span></option>
                 <option value="Dr." class="pl-2"><span class="mx-3 block"></span>Dr.</span></option>
                  <option value="Mallam" class="pl-2"><span class="mx-3 block"></span>Mallam</span></option>
                   <option value="Ustaadh" class="pl-2"><span class="mx-3 block"></span>Ustaadh</span></option>
                    <option value="Alh." class="pl-2"><span class="mx-3 block"></span>Alh.</span></option>            
                                        </select>
                                    </div>
                                    
<label for="lecturerInput" class="block text-sm font-medium text-gray-700 my-2">Full Name:</label>     <input type="text" id="lecturerInput" class="mt-1 p-2 border border-gray-300 rounded-lg w-full focus:outline-none focus:shadow" oninput="updateTemplate()">
 <label for="dateGreInput" class="block text-sm font-medium text-gray-700 my-2">Date:</label>
 <input type="date" id="dateGreInput" class="mt-1 p-2 w-full focus:outline-none focus:shadow border border-gray-300  rounded-lg" oninput="updateTemplate()">
 
 <div class="flex justify-between align-center ">
 
    <button id="preview"  class="mt-4 bg-diamond-2 text-white px-4 py-2 rounded-md text-sm">Preview</button>
      
    </div>
  </div>
  </main>
 
 <!--<div id="templateContainer" style="width: 960px; height: 540px;" class="relative">
  <img src="./bg.jpg" alt="" style="width: 100%; height: 100%;">
  
  <div style="position: relative; top: 0; left: 0; width: 100%; height: 100%;">
    <img src="./mssn-logo.png" alt="" style="width: 64px; height: 64px; margin: 20px auto; display: block;">
    <p style="text-align: center; margin-top: 5px; font-size: 14px;">MUSLIM STUDENTS' SOCIETY OF NIGERIA<br>REMO AREA COUNCIL</p>
    
    <div style="text-align: center; margin-top: 20px;">
      <span style="display: block; font-size: 16px; color: gray;">Presents</span>
      <h1 style="font-size: 48px; margin: 20px 0;">WEEKLY USRAH</h1>
    </div>
    
    <div style="background-color: green; color: white; padding: 10px; width: 75%; margin: 20px auto; display: flex;">
      <span style="background-color: red; padding: 5px; margin-right: 10px;">Topic:</span>
      <span id="topic" style="flex-grow: 1;"></span>
    </div>
    
    <div style="padding: 20px; background-color: green; color: white; width: 100%; display: table;">
      <div style="display: table-row;">
        <div style="display: table-cell; text-align: left;">
          <span>Lecturer:</span>
          <div><span id="titlePort"></span> <span id="lecturer"></span></div>
        </div>
        <div style="display: table-cell; text-align: left;">
          <span>Date:</span>
          <div><span id="dateGre"></span> <span id="dateIsl"></span></div>
        </div>
      </div>
      <div style="display: table-row;">
        <div style="display: table-cell; text-align: left;">
          <span>Time:</span>
          <div>04:30 pm - 6:30 pm</div>
        </div>
        <div style="display: table-cell; text-align: left;">
          <span>Venue:</span>
          <div>Sagamu Central Mosque, Falawo</div>
        </div>
      </div>
    </div>
    
    <div style="margin-top: 20px; text-align: center;">
      <p>mssnremoareacouncil</p>
      <p>+234 708 050 8894</p>
    </div>
  </div>
</div>
-->
  
  <div id="temCon" class="hidden">
  <div id="templateContainer" style="width:125%;" class="relative">
     <div>
     
   
   <!--<div class="bg-contain bg-center bg-no-repeat" style="background: url('./bg.jpg');">-->
     <div class="relative" style="height: 100%">
       
  
     <img src="./bg.jpg" alt="" class="absolute h-full bg-white w-full bg-gradient-to-t from-white to-transparent z-10" style="height: 470px">
     
     <div class="flex flex-col gap-1 justify-between">
       <div class="border-1 border-gray-800 bg-transparent rounded-full w-16 h-16 mx-auto mt-5">
       <img src="./mssn-logo.png" alt="" class="w-full h-full rounded-full p-2">
       </div>
       <span class="uppercase font-bold leading-tight tracking-widest text-center text-sm bold-text text-gray-700">MUSLIM STUDENTS' SOCIETY OF NIGERIA <br>REMO AREA COUNCIL</span>
     </div>
     <div class="flex flex-col gap-1 justify-between align-center text-center">
       <p class="font-light text-gray-700 capitalize mt-5 light-text">Presents</p>
       <h1 class="text-8xl leading-0 tracking-widest text-shadow font-black -mt-10" style="line-height: 0.85;">WEEKLY <br>USRAH</h1>
     </div>
     <div class="bg-green-800 p-2 flex align-center gap-2 rounded-b-md mt-10 w-3/4 mx-auto text-white font-bold bold-text">
       <p class="self-center bg-red-500 pb-3 px-1 rounded-sm">
         Topic:
       </p>
      <p class="block text-1eft self-center leading-tight pb-3" id="topic"></p>
     </div>
   </div>
   
   <div class="mt-2 border-t-4 border-lime bg-green-800 px-10 py-5 w-full grid grid-cols-2 gap-2">
     <!--<div class="flex justify-between align-center w-full gap-2">-->
       <div class="flex flex-col align-center">
         <span class="text-lime leading-0 font-bold" style="line-height: 0.85;">Lecturer:</span>
         <div class="text-white leading-tight">
           <span class="pr-1" id="titlePort"></span>
         <span id="lecturer"></span>
         </div>
       </div>
       
       <div class="flex flex-col align-center">
         <span class="text-lime leading-0 font-bold" style="line-height: 0.85;">Date:</span>
       <!--  <span class="text-white leading-tight">Thursday, 1st February, 2024</span>-->
                  <span class="text-white leading-tight" id="dateGre"></span>
                  <span class="text-white leading-tight" id="dateIsl"></span>

       </div>
     <!--</div>-->
    <!-- <div class="mt-2 flex justify-between align-center w-full gap-2">-->
       <div class="mt-5 flex flex-col align-center">
         <span class="text-lime leading-0 font-bold" style="line-height: 0.85;">Time:</span>
         <span class="text-white leading-tight">04:30 pm - 6:30 pm</span>
       </div>
       
       <div class="mt-5 flex flex-col align-center">
         <span class="text-lime leading-0 font-bold" style="line-height: 0.85;">Venue:</span>
         <span class="text-white leading-tight">Sagamu Central Mosque, Falawo</span>
       </div>
    <!-- </div>-->

   </div>
   <div class="flex mx-auto justify-center gap-3 px-10 mt-0 mb-3 pb-3 -pt-2 bg-white align-center text-green-800 text-sm">
     <div class="flex gap-1 align-center">
       <div>
         <i class="fab fa-instagram"></i>
         <i class="fab fa-facebook"></i>
         <i class="fab fa-twitter"></i>
       </div>
       
      <p class="self-center">mssnremoareacouncil</p>
     </div>
      <div class="flex align-center gap-1">
        <div>
        <i class="fab fa-whatsapp"></i>
        </div>
        <p class="self-center">+234 708 050 8894</p>
      </div>
   </div>
     
   </div>
    
   </div>
   <div class="flex justify-evenly align-center mt-10 items-center w-full">
     
     <div>
       
    
   <button type="button" class="bg-diamond-2 text-white px-4 py-2 rounded-md text-xl" id="downloadFlyer">Download Flyer</button>
   </div>
   <div class="self-center">
    <button type="button" class="link-btn focus:outline-none focus:ring-0 block tx-diamond  font-semibold md:font-medium relative leading-none text-xl tx-mont self-center" id="update">Edit</button>
  </div>

</div>
</div>


<script>

document.addEventListener("DOMContentLoaded", function() {
    const modal = document.getElementById("modal");
    const temCon = document.getElementById("temCon");
    const updateModal = document.getElementById("update");
    const previewBtn = document.getElementById("preview");
    const downloadBtn = document.getElementById("downloadFlyer");

    // Setting up date input with Flatpickr
    setMinDateAndRestrictToThursdays();

    function showTemCon() {
        modal.style.display = "none";
        temCon.style.display = "block";
        temCon.classList.remove("hidden");
        document.body.style.overflow = "hidden";
    }

    function hideTemCon() {
      modal.style.marginTop ="50%";
        modal.style.display = "block";
        temCon.style.display = "none";
        temCon.classList.add("hidden");
        document.body.style.overflow = "";
    }

    previewBtn.addEventListener("click", function () {
        showTemCon();
        updateTemplate();
    });

    downloadBtn.addEventListener("click", downloadFlyer);
    updateModal.addEventListener("click", hideTemCon);

    document.getElementById('dateGreInput').addEventListener('change', convertToHijriAndDisplay);
    
    document.getElementById('titleSelect').addEventListener('change', updateTemplate);
});

function setMinDateAndRestrictToThursdays() {
    flatpickr("#dateGreInput", {
        minDate: "today",
        dateFormat: "Y-m-d",
        enable: [function(date) { return date.getDay() === 4; }],
        onChange: [convertToHijriAndDisplay]
    });
}

function updateTemplate() {
  //const title = document.getElementById('titleSelect').value; // Get the selected title value
    document.getElementById('topic').innerText = document.getElementById('topicInput').value;
    document.getElementById('lecturer').innerText = document.getElementById('lecturerInput').value;
    document.getElementById('dateGre').innerText = formatDate(document.getElementById('dateGreInput').value);
    document.getElementById('titlePort').innerText = document.getElementById('titleSelect').value;
}

function convertToHijriAndDisplay() {
    const date = document.getElementById('dateGreInput').value;
    if (date) {
        fetchHijriDate(date, function(hijriDateString) {
            document.getElementById('dateIsl').innerText = hijriDateString;
        });
    }
}

function fetchHijriDate(inputDate, callback) {
    const [year, month, day] = inputDate.split('-');
    const formattedDate = `${day}-${month}-${year}`;

    fetch(`https://api.aladhan.com/v1/gToH/${formattedDate}`)
    .then(response => response.json())
    .then(data => {
        if (data.data && data.data.hijri) {
            const hijri = data.data.hijri;
            callback(`${formatDayWithSuffix(hijri.day)} ${hijri.month.en} ${hijri.year}AH`);
        }
    })
    .catch(error => console.error('Error fetching Hijri date:', error));
}

function formatDayWithSuffix(day) {
    // Remove leading zeros by converting to integer then back to string
    day = parseInt(day, 10).toString();
    const lastDigit = parseInt(day.slice(-1), 10);
    const exceptions = [11, 12, 13];
    const dayInt = parseInt(day, 10);

    // Check if the day is an exception; if not, determine the correct suffix
    let suffix;
    if (exceptions.includes(dayInt)) {
        suffix = 'th';
    } else {
        switch (lastDigit) {
            case 1: suffix = 'st'; break;
            case 2: suffix = 'nd'; break;
            case 3: suffix = 'rd'; break;
            default: suffix = 'th';
        }
    }

    return day + suffix;
}

function formatDate(dateStr) {
    const date = new Date(dateStr);
    const options = { weekday: 'long', month: 'long', year: 'numeric' };
    const weekday = date.toLocaleDateString('en-US', { weekday: 'long' });
    const month = date.toLocaleDateString('en-US', { month: 'long' });
    const year = date.getFullYear();
    // Apply formatDayWithSuffix for the day part
    const dayWithSuffix = formatDayWithSuffix(date.getDate());

    // Constructing the formatted date string with the updated day part
    const formattedDate = `${weekday}, ${month} ${dayWithSuffix}, ${year}`;
    return formattedDate;
}

function downloadFlyer() {
    html2canvas(document.getElementById("templateContainer")).then(function (
      canvas
    ) {
      const link = document.createElement("a");
      link.href = canvas.toDataURL();
      link.download = "flyer.png";
      link.click();
    });
}


/*function renderFlyer() {
    html2canvas(document.getElementById("templateContainer"), {
        scale: 1, // Adjust scale as needed
        logging: true,
        useCORS: true, // For external images
        windowWidth: document.getElementById("templateContainer").scrollWidth,
        windowHeight: document.getElementById("templateContainer").scrollHeight,
        x: 0,
        y: window.pageYOffset // Adjust if the container is partially off-screen
    }).then(function (canvas) {
        const link = document.createElement("a");
        link.href = canvas.toDataURL("image/png");
        link.download = "flyer.png";
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    });
}*/


 /* function updateTemplate() {
      // Get user input
      const topic = document.getElementById('topicInput').value;
      const lecturer = document.getElementById('lecturerInput').value;
      const dateGre = document.getElementById('dateGreInput').value;
    //  const dateIsl = document.getElementById('dateIslInput').value;

      // Update template content in real-time
      document.getElementById('topic').innerText = topic;
      document.getElementById('lecturer').innerText = lecturer;
      document.getElementById('dateGre').innerText = dateGre;
    //  document.getElementById('dateIsl').innerText = `Date: ${dateIsl}`;
      // Update other dynamic content as needed
   }
  
  document.addEventListener("DOMContentLoaded", function () {
  const modal = document.getElementById("modal");
  const temCon = document.getElementById("temCon");
    const updateModal = document.getElementById("update");

  const previewBtn = document.getElementById("preview");
  const downloadBtn = document.getElementById("downloadFlyer");

  function updateTemplateLive() {
    topicContainer.innerText = topicInput.value;
    lecturerContainer.innerText = lecturerInput.value;
    dateGreContainer.innerText = "Date: " + dateGreInput.value;
  }

  function showTemCon() {
    const modal = document.getElementById("modal");
  const temCon = document.getElementById("temCon");
  modal.style.display = "none";
  temCon.style.display = "block";
  temCon.classList.remove("hidden");
  document.body.style.overflow = "hidden";
  }
  
  function hideTemCon() {

  modal.style.marginTop ="50%"
  modal.style.display = "block";
  temCon.style.display = "none";
  temCon.classList.add("hidden");
  document.body.style.overflow = "";
  }
  
  
  

  function downloadFlyer() {
    html2canvas(document.getElementById("templateContainer")).then(function (
      canvas
    ) {
      const link = document.createElement("a");
      link.href = canvas.toDataURL();
      link.download = "flyer.png";
      link.click();
    });
  }

  previewBtn.addEventListener("click", function () {
    showTemCon();
  });

  downloadBtn.addEventListener("click", function () {
    downloadFlyer();
  });

  updateModal.addEventListener("click", ()=> hideTemCon());
});*/

</script>
<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

</body>
</html>